<html>
	<head>
		<script type="text/javascript" src="js/jquery-min.js"></script>
		<style type="text/css">
			#container {
				border: 1px black solid;
				width: 400px;
				height:429px;
				left: 200px;
				overflow: hidden;
				position: relative;
			}
			
			#content {
				width: 965px;
				height:429px;
				background-image: url('img/meadow.png');
				position: relative;
				left: 0px;
			}			
		</style>
		<script type="text/javascript">

			(function( $ ){
  				$.fn.pan = function(options) {

  					var settings = $.extend( {
				      'speed'			: 1,
				      'updateInterval'	: 100
				    }, options);

				    var container = this;
				    var content = this.children(':first');

				    var offset = Number(content.css('left').replace('px', ''));
					var contentWidth = content.width();
					var containerWidth = container.width();
					var minOffset = -contentWidth + containerWidth;
					var maxOffset = 0;
					var autoPan = true;

					var mouseOver = false;
					var mousePosition = {
						'x': 0,
						'y': 0
					};

					var autoPanSpeed = -settings.speed;
					var updateInterval = settings.updateInterval;

					var onInterval = function() {
						
						if(mouseOver) {
							if(mousePosition.x < 50) {
								offset += 2;
							} else if (mousePosition.x > containerWidth - 50) {
								offset -= 2;
							}
						} else if(autoPan) {
							offset += autoPanSpeed;
						}

						constrainToBounds();
						
						if(autoPan) {
							if(offset == minOffset) autoPanSpeed = Math.abs(autoPanSpeed);
							if(offset == maxOffset) autoPanSpeed = -Math.abs(autoPanSpeed);
						}

						content.css('left', offset + "px");
					}

					var constrainToBounds = function() {
						if(offset < minOffset) offset = minOffset;
						if(offset > maxOffset) offset = maxOffset;
					}

					this.bind('mousemove', function(evt) {
						mousePosition.x = evt.pageX - container.offset().left;
						mousePosition.y = evt.pageY - container.offset().top;
						mouseOver = true;
					});

					this.bind('mouseout', function(evt) {
						mouseOver = false;
					});

					setInterval(onInterval, updateInterval);
					return this;
  				};
			})( jQuery );


		</script>
	</head>
	<body>
		<div id="container">
			<div id="content"></div>
		</div>
		<script type="text/javascript">
			$('#container').pan({
				speed: 1,
				updateInterval: 30
			});
		</script>
	</body>
</html>